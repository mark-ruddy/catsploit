use std::{error::Error, net::TcpStream, time::Duration};

pub struct RemoteTcp {
    pub rhost: String,
    pub rport: String,
    pub read_timeout: Option<Duration>,
    pub write_timeout: Option<Duration>,
}

impl RemoteTcp {
    pub fn connect(&self) -> Result<TcpStream, Box<dyn Error>> {
        let stream = TcpStream::connect(format!("{}:{}", self.rhost, self.rport))?;
        stream.set_read_timeout(self.read_timeout)?;
        stream.set_write_timeout(self.write_timeout)?;
        Ok(stream)
    }

    pub fn custom_connect(&self, rhost: &str, rport: &str) -> Result<TcpStream, Box<dyn Error>> {
        let stream = TcpStream::connect(format!("{}:{}", rhost, rport))?;
        stream.set_read_timeout(self.read_timeout)?;
        stream.set_write_timeout(self.write_timeout)?;
        Ok(stream)
    }
}
